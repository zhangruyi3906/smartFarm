# smartFarm
### 嵌入式智能农场实战项目
总结：
#### 所需技术
1. 编程语言：C语言、C++
2. 开发平台：linux系统、QT
3. v4l2编程（摄像头采集图像）
4. zigbee编程
5. 网络编程
### 涉及的参与方

（1）客户端（Qt上位机）
（2）服务端 +  摄像头（需要不断地供电）   处理数据及中间通道   中间桥梁   串口（传输数据）、zigbee网络
（3）设备端：M0采集数据（实现相应的功能）

系统架构图：
![19d9834caf66116c94d331e1a1d442a2](https://s2.loli.net/2024/06/05/mRWMDOykG3oZ1Tz.png)
![3ffc500a3b850cfa463895956d00dbae](https://s2.loli.net/2024/06/10/UKZsNp8Li1OETQk.jpg)
项目所用到的开发板
a9开发板
![IMG_20240607_111715(1)](D:\C盘其他文件\C盘下载/IMG_20240607_111715(1).jpg)

m0开发板
![IMG_20240607_111706](https://s2.loli.net/2024/06/10/VWjt3SxqbHEa1r6.jpg)

zigbee模块：
![IMG_20240607_111709](https://s2.loli.net/2024/06/10/GzBARlHUYIu6C3E.jpg)

# 智能农场

1. 需求：温湿度、光照、浴霸、排风扇、报警、自动浇水、摄像头
2. 怎么来实现？
![image-20240605213055682](https://s2.loli.net/2024/06/05/9uVFrX5acBdg8Ii.png)

最终实现效果图

![image-20240605213805603](https://s2.loli.net/2024/06/05/aUmwtup5MKoRHgc.png)


## 实现步骤和细节
1. 连接传感器模块：Zigbee协调器节点（建立网络，配对和终端节点连接）和终端节点（接收数据，从温湿度传感器等接收数据）
2. 打开USB0串口，调用函数进行串口属性初始化。
3. 创建camera_fd套接字
4. 编写Qt客户端的代码文件，主要是qt的ui界面及其公共按钮监听，就是按下后发送命令，
5. 涉及到三个子模块：虚拟机、本机windows和能够烧录Linux系统的A9开发板，本机负责安装和启动QT客户端，虚拟机负责将运行在开发板上的服务器端代码.c文件进行编译为可执行文件默认为a.out，也可以改名字，再将可执行文件通过scp命令传给开发板执行，而后开发板通过串口连接的zigbee模块，与控制电路（智能农场）交互信息，控制电路（也就是风扇、小灯的那块板子m0）的代码是提前写好烧制的，中间可以用串口调试助手来预调试。
6. 最后是windows上的QT客户端-----网线局域网-------》linux服务器主板(arm-cortexA9)--->（串口线）----> zigbee协调器+摄像头-->（m0上的zigbee终端）+M0（stm32类型的）

 
##### 服务器主板（A9连接情况）
1.电源线 2.超级终端控制线  3. 串口线（摄像头+zigbee协调器）4.网线（局域网+通过ssh协议安全接收传输过来的文件）
